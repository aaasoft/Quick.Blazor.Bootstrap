<ToastStack @ref="toastStack" AutoClose="true" />
<div class="row">
    <div class="col-12">
        <div class="btn-group mr-1" role="group">
            <button type="button" class="btn btn-secondary" @onclick="newShell">@TextOpen</button>
            <button type="button" class="btn btn-secondary" @onclick="killShell">@TextClose</button>
            <button type="button" class="btn btn-secondary" @onclick="ClearConsoleHistory">@TextClear</button>
        </div>
        <div class="btn-group">
            <button type="button" class="btn btn-secondary @(ConsoleHeight == 750?"active":"")" @onclick="ConsoleSetHeight(750)">▇</button>
            <button type="button" class="btn btn-secondary @(ConsoleHeight == 500?"active":"")" @onclick="ConsoleSetHeight(500)">▅</button>
            <button type="button" class="btn btn-secondary @(ConsoleHeight == 250?"active":"")" @onclick="ConsoleSetHeight(250)">▃</button>
        </div>
        <div class="btn-group">
            <button type="button" class="btn btn-secondary" @onclick="Reboot">@TextReboot</button>
        </div>
    </div>
    <div class="col-12">
        @switch (ConsoleHeight)
        {
            case 750:
                <div id="console" style="height:750px;overflow-y:scroll" class="bg-dark form-control m-0 text-light">
                    <Microsoft.AspNetCore.Components.Web.Virtualization.Virtualize Items="ConsoleHistoryList" Context="line">
                        <ItemContent>
                            <p class="m-0">@line</p>
                        </ItemContent>
                        <Placeholder>
                            <p>@TextLoading</p>
                        </Placeholder>
                    </Microsoft.AspNetCore.Components.Web.Virtualization.Virtualize>
                    <p class="m-0">@ConsoleLastLine</p>
                </div>
                break;
            case 500:
                <div id="console" style="height:500px;overflow-y:scroll" class="bg-dark form-control m-0 text-light">
                    <Microsoft.AspNetCore.Components.Web.Virtualization.Virtualize Items="ConsoleHistoryList" Context="line">
                        <ItemContent>
                            <p class="m-0">@line</p>
                        </ItemContent>
                        <Placeholder>
                            <p>@TextLoading</p>
                        </Placeholder>
                    </Microsoft.AspNetCore.Components.Web.Virtualization.Virtualize>
                    <p class="m-0">@ConsoleLastLine</p>
                </div>
                break;
            case 250:
                <div id="console" style="height:250px;overflow-y:scroll" class="bg-dark form-control m-0 text-light">
                    <Microsoft.AspNetCore.Components.Web.Virtualization.Virtualize Items="ConsoleHistoryList" Context="line">
                        <ItemContent>
                            <p class="m-0">@line</p>
                        </ItemContent>
                        <Placeholder>
                            <p>@TextLoading</p>
                        </Placeholder>
                    </Microsoft.AspNetCore.Components.Web.Virtualization.Virtualize>
                    <p class="m-0">@ConsoleLastLine</p>
                </div>
                break;
        }
        @if (process != null)
        {
            <input id="txtCommand" type="text" class="bg-dark form-control m-0 text-light" @bind="ConsoleCommand" @bind:event="oninput" @onkeypress="onKeyPress" />
        }
    </div>
</div>
<ModalAlert @ref="modalAlert" />